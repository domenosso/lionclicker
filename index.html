<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Лев-Кликер: Король Саванны</title>
  <link href="https://fonts.googleapis.com/css2?family=Geologica:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Geologica',sans-serif;
      background:linear-gradient(135deg,#ff8c00,#ffd700,#ffb800,#ff9500);
      background-size:400% 400%;
      animation:gradientShift 12s ease infinite;
      min-height:100vh;color:#fff;overflow:hidden;position:relative;
      touch-action: manipulation; /* Отключает зум при двойном тапе */
    }
    @keyframes gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .container{display:flex;height:100vh;padding:15px;gap:15px;flex-wrap:wrap}
    .left-panel,.right-panel{flex:1;min-width:300px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:25px}
    .divider{width:3px;background:linear-gradient(to bottom,transparent,#fff,transparent);border-radius:2px;box-shadow:0 0 15px rgba(255,255,255,.7);opacity:.6}

    /* Кликер — отключаем зум на iPad */
    .click-button{
      width:160px;height:160px;
      background:radial-gradient(circle at 30% 30%,#fff,#ffcc00);
      border:6px solid #ff6b00;border-radius:50%;
      cursor:pointer;transition:all .15s ease;
      box-shadow:0 12px 25px rgba(0,0,0,.3);
      display:flex;align-items:center;justify-content:center;
      font-size:56px;font-weight:700;color:#ff4500;
      user-select:none;position:relative;overflow:hidden;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    .click-button:active{transform:scale(.9)}

    .clicks-display{font-size:38px;font-weight:700;text-shadow:0 3px 8px rgba(0,0,0,.4);letter-spacing:1px}
    .upgrade-btn{
      padding:14px 32px;background:linear-gradient(45deg,#ff4500,#ff6b00);
      color:#fff;border:none;border-radius:50px;
      font-size:18px;font-weight:600;cursor:pointer;
      box-shadow:0 8px 20px rgba(255,69,0,.4);
      transition:all .3s ease;position:relative;overflow:hidden;
      touch-action: manipulation;
    }
    .upgrade-btn:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 12px 25px rgba(255,69,0,.5)}
    .upgrade-btn:disabled{background:#666;cursor:not-allowed;transform:none;box-shadow:none}

    .pet-container{text-align:center;position:relative}
    .pet-image{
      width:200px;height:200px;border-radius:50%;object-fit:cover;
      border:7px solid #fff;box-shadow:0 15px 30px rgba(0,0,0,.35);
      transition:all .5s ease;
    }
    .pet-image.upgrade{animation:petUpgrade .8s ease}
    @keyframes petUpgrade{
      0%{transform:scale(1) rotate(0);filter:brightness(1)}
      20%{transform:scale(1.1)}50%{transform:scale(1.3) rotate(5deg);filter:brightness(1.6)}
      70%{transform:scale(1.25) rotate(-3deg)}100%{transform:scale(1) rotate(0);filter:brightness(1)}
    }
    .pet-title{
      margin-top:15px;font-size:28px;font-weight:700;
      text-shadow:0 2px 6px rgba(0,0,0,.4);transition:all .5s ease;
    }
    .pet-title.gold{
      color:#ffd700;
      text-shadow:0 0 10px #ffcc00,0 0 20px #ff9900,0 0 30px #ff6600,0 2px 6px rgba(0,0,0,.6);
      animation:goldGlow 2s ease-in-out infinite alternate;
    }
    @keyframes goldGlow{
      from{text-shadow:0 0 10px #ffcc00,0 0 20px #ff9900,0 0 30px #ff6600,0 2px 6px rgba(0,0,0,.6)}
      to{text-shadow:0 0 15px #ffcc00,0 0 25px #ff9900,0 0 40px #ff6600,0 0 50px #ff3300,0 2px 6px rgba(0,0,0,.8)}
    }
    .pet-level{margin-top:8px;font-size:20px;color:#fffae6;font-weight:500}
    .price-tag{font-size:16px;color:#fff8;font-weight:500}
    .pet-upgrade-wrapper{margin-top:20px}

    @keyframes vibrate{
      0%,100%{transform:translateX(0)}
      10%,30%,50%,70%,90%{transform:translateX(-5px)}
      20%,40%,60%,80%{transform:translateX(5px)}
    }
    .vibrate{animation:vibrate .5s ease}

    .toast-container{position:fixed;top:20px;right:20px;z-index:1000;display:flex;flex-direction:column;gap:10px}
    .toast{
      background:rgba(0,0,0,.85);color:#fff;padding:14px 20px;
      border-radius:12px;font-size:16px;font-weight:600;
      box-shadow:0 8px 20px rgba(0,0,0,.3);
      backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);
      transform:translateX(120%);
      animation:toastIn .5s ease forwards,toastOut .5s ease 2.5s forwards;
      min-width:220px;display:flex;align-items:center;gap:10px;
    }
    .toast.success{border-left:5px solid #4ade80}
    .toast.error{border-left:5px solid #ff6b6b}
    @keyframes toastIn{to{transform:translateX(0)}}
    @keyframes toastOut{to{transform:translateX(120%);opacity:0}}

    /* АДМИН-ПАНЕЛЬ */
    .admin-panel{
      position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,.9);padding:15px;border-radius:15px;
      box-shadow:0 10px 30px rgba(0,0,0,.5);color:#fff;
      font-size:14px;z-index:9999;display:none;flex-direction:column;gap:10px;
      min-width:280px;align-items:center;
    }
    .admin-panel input, .admin-panel button{
      padding:8px 12px;border-radius:8px;border:none;font-size:14px;
    }
    .admin-panel input{width:120px;text-align:center}
    .admin-panel button{background:#ff6b00;color:#fff;cursor:pointer}
    .admin-panel button:hover{background:#ff4500}

    @media (max-width:768px){
      .container{flex-direction:column;padding:10px}
      .divider{display:none}
      .click-button{width:140px;height:140px;font-size:48px}
      .pet-image{width:160px;height:160px}
      .clicks-display{font-size:32px}
      .pet-title{font-size:24px}
      .pet-upgrade-wrapper{margin-top:15px}
      .admin-panel{font-size:13px;min-width:240px}
    }
  </style>
</head>
<body>

  <div class="container">
    <!-- Левая панель -->
    <div class="left-panel">
      <div class="clicks-display" id="clicks">0</div>
      <button class="click-button" id="clickBtn">Лапа</button>
      <div>
        <button class="upgrade-btn" id="upgradeClick">
          Улучшить клик<br>
          <span class="price-tag" id="clickCost">Цена: 100</span>
        </button>
      </div>
    </div>

    <!-- Разделитель -->
    <div class="divider"></div>

    <!-- Правая панель — питомец -->
    <div class="right-panel">
      <div class="pet-container" id="petContainer">
        <img src="lvl0.png" alt="Питомец" class="pet-image" id="petImage">
        <div class="pet-title" id="petTitle">Котёнок</div>
        <div class="pet-level" id="petLevel">Уровень 0</div>
        <div class="pet-upgrade-wrapper">
          <button class="upgrade-btn" id="upgradePet">
            Улучшить питомца<br>
            <span class="price-tag" id="petCost">Цена: 5000</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Тосты -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- АДМИН-ПАНЕЛЬ -->
  <div class="admin-panel" id="adminPanel">
    <div style="font-weight:700;color:#ffd700">Админка</div>
    <div style="display:flex;gap:5px;align-items:center">
      <input type="number" id="adminCoins" placeholder="Клики" min="0">
      <button id="addCoinsBtn">Добавить</button>
    </div>
    <div style="display:flex;gap:5px;align-items:center">
      <input type="number" id="adminLevel" placeholder="Уровень" min="0" max="4">
      <button id="setLevelBtn">Установить</button>
    </div>
    <button id="resetBtn" style="background:#ff4444">Сбросить всё</button>
  </div>

  <script>
    // === Данные ===
    let clicks = 0, clickPower = 1, clickUpgradeCost = 100, petLevel = 0;
    const petNames = ["Котёнок","Львёнок","Лев","Мастер-лев","Король лев"];
    const petUpgradeCosts = [500 esen,15000,30000,0]; // 0→1,1→2,2→3,3→4

    // === Элементы ===
    const clickBtn = document.getElementById('clickBtn');
    const clicksDisplay = document.getElementById('clicks');
    const upgradeClickBtn = document.getElementById('upgradeClick');
    const clickCostSpan = document.getElementById('clickCost');
    const petImage = document.getElementById('petImage');
    const petTitle = document.getElementById('petTitle');
    const petLevelEl = document.getElementById('petLevel');
    const petContainer = document.getElementById('petContainer');
    const upgradePetBtn = document.getElementById('upgradePet');
    const petCostSpan = document.getElementById('petCost');
    const toastContainer = document.getElementById('toastContainer');
    const adminPanel = document.getElementById('adminPanel');

    const SAVE_KEY = 'lionClickerSave';

    // === Проверка админа ===
    const urlParams = new URLSearchParams(window.location.search);
    const isAdmin = urlParams.get('admin') === 'true';
    if (isAdmin) {
      adminPanel.style.display = 'flex';
    }

    // === Сохранение / Загрузка ===
    function saveGame(){
      const d={clicks,clickPower,clickUpgradeCost,petLevel,timestamp:Date.now()};
      localStorage.setItem(SAVE_KEY,JSON.stringify(d));
    }
    function loadGame(){
      const s=localStorage.getItem(SAVE_KEY);
      if(s){
        const d=JSON.parse(s);
        clicks=d.clicks||0; clickPower=d.clickPower||1;
        clickUpgradeCost=d.clickUpgradeCost||100; petLevel=d.petLevel||0;
      }
    }
    function resetGame(){
      if(confirm('Сбросить ВЕСЬ прогресс?')){
        localStorage.removeItem(SAVE_KEY);
        clicks = 0; clickPower = 1; clickUpgradeCost = 100; petLevel = 0;
        updateUI();
        showToast('Прогресс сброшен!', 'success');
      }
    }
    setInterval(saveGame,2000);

    // === UI ===
    function updateUI(){
      clicksDisplay.textContent = clicks.toLocaleString('ru-RU');
      clickCostSpan.textContent = `Цена: ${clickUpgradeCost.toLocaleString('ru-RU')}`;
      upgradeClickBtn.disabled = clicks < clickUpgradeCost;

      if(petLevel >= 4){
        petCostSpan.textContent='Максимальный уровень!';
        upgradePetBtn.disabled=true; upgradePetBtn.style.background='#666';
      }else{
        const cost=petUpgradeCosts[petLevel];
        petCostSpan.textContent=`Цена: ${cost.toLocaleString('ru-RU')}`;
        upgradePetBtn.disabled=clicks<cost;
      }

      petTitle.textContent = petNames[petLevel];
      petLevelEl.textContent = `Уровень ${petLevel}`;
      petTitle.classList.toggle('gold', petLevel===4);
      petImage.src = `lvl${petLevel}.png`;
    }

    // === Тосты ===
    function showToast(msg,type='success'){
      const t=document.createElement('div');
      t.className=`toast ${type}`;
      t.innerHTML=`<span class="toast-icon">${type==='success'?'Галочка':'Крестик'}</span><span>${msg}</span>`;
      toastContainer.appendChild(t);
      setTimeout(()=>t.remove(),3500);
    }

    function vibratePet(){
      petContainer.classList.add('vibrate');
      setTimeout(()=>petContainer.classList.remove('vibrate'),500);
    }

    // === Клик ===
    clickBtn.addEventListener('click',()=>{
      clicks+=clickPower; updateUI(); saveGame();
      const f=document.createElement('div');
      f.textContent=`+${clickPower}`;
      f.style.cssText=`position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
        font-weight:bold;font-size:36px;color:#fff;text-shadow:0 0 10px #ff4500;
        pointer-events:none;animation:floatUp 1s ease-out forwards;z-index:10;`;
      clickBtn.appendChild(f); setTimeout(()=>f.remove(),1000);

      const r=document.createElement('div');
      r.style.cssText=`position:absolute;border-radius:50%;background:rgba(255,255,255,.6);
        transform:scale(0);animation:ripple .6s ease-out;width:100px;height:100px;
        left:50%;top:50%;margin-left:-50px;margin-top:-50px;pointer-events:none;`;
      clickBtn.appendChild(r); setTimeout(()=>r.remove(),600);
    });

    // === Улучшения ===
    upgradeClickBtn.addEventListener('click',()=>{
      if(clicks>=clickUpgradeCost){
        clicks-=clickUpgradeCost; clickPower++;
        clickUpgradeCost=Math.floor(clickUpgradeCost*2.5);
        updateUI(); saveGame();
        showToast(`Клик усилен! Теперь +${clickPower}`, 'success');
      }else showToast('Недостаточно кликов!', 'error');
    });

    upgradePetBtn.addEventListener('click',()=>{
      if(petLevel >= 4) return;
      const cost=petUpgradeCosts[petLevel];
      if(clicks>=cost){
        clicks-=cost; petLevel++;
        petImage.src=`lvl${petLevel}.png`;
        petImage.classList.add('upgrade');
        vibratePet(); updateUI(); saveGame();
        setTimeout(()=>petImage.classList.remove('upgrade'),800);
        const msg = petLevel===4 ? 'Король лев пробудился!' : `Питомец стал: ${petNames[petLevel]}!`;
        showToast(msg,'success');
      }else showToast('Недостаточно кликов!', 'error');
    });

    // === АДМИНКА ===
    if (isAdmin) {
      document.getElementById('addCoinsBtn').addEventListener('click', () => {
        const val = parseInt(document.getElementById('adminCoins').value);
        if (val > 0) {
          clicks += val;
          updateUI(); saveGame();
          showToast(`+${val.toLocaleString()} кликов!`, 'success');
        }
      });

      document.getElementById('setLevelBtn').addEventListener('click', () => {
        const val = parseInt(document.getElementById('adminLevel').value);
        if (val >= 0 && val <= 4) {
          petLevel = val;
          updateUI(); saveGame();
          showToast(`Уровень установлен: ${petLevel}`, 'success');
        }
      });

      document.getElementById('resetBtn').addEventListener('click', resetGame);
    }

    // === Инициализация ===
    loadGame(); updateUI();

    // Анимации
    const s=document.createElement('style');
    s.textContent=`
      @keyframes floatUp{to{transform:translate(-50%,-150%);opacity:0}}
      @keyframes ripple{to{transform:scale(2);opacity:0}}
    `;
    document.head.appendChild(s);
  </script>
</body>
</html>
